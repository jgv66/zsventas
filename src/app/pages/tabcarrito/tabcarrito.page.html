<ion-header>
  <ion-toolbar color="primary">
    <img src="assets/imgs/logo-zs.png" alt="" class="navbar-img" > 
    <ion-title>Pre-venta en Curso</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  
  <ion-button *ngIf=" sumaCarrito() > 0 " expand="block" color="primary">Total del Pedido: ${{ sumaCarrito() | number:0 }}</ion-button>
  
  <ion-list *ngIf=" sumaCarrito() > 0 ">
    <ion-item-sliding  *ngFor="let producto of funciones.miCarrito">
      <!-- menu cantidad e info -->
      <ion-item-options side="start" class="item1">
        <ion-item-option color="primary" (click)="cambiarCantidad(producto)"><ion-icon name="color-wand"></ion-icon>Cantidad</ion-item-option>
        <ion-item-option color="secondary" (click)="infoProducto(producto)">   <ion-icon name="information-circle"></ion-icon>Info</ion-item-option>
      </ion-item-options>
      <!-- menu de borrar -->
      <ion-item-options side="end" class="item1">
          <ion-item-option color="danger" (click)="quitarDelCarro( producto )"><ion-icon name="trash"></ion-icon>Borrar</ion-item-option>
      </ion-item-options>
  
      <ion-item class="item1">
        <ion-grid class="grid1">
          <!-- prod + bod -->
          <ion-row style=" height: 25px;">
              <ion-col size="3" class="ion-text-right">
                  <p>Código : </p>
              </ion-col>
              <ion-col size="6" class="ion-text-left">
                  <p><b>{{ producto.codigo }}</b></p>
              </ion-col>
              <ion-col size="3" class="ion-text-left">
                  <p>Bod : <b>{{ producto.bodega }}</b></p>
              </ion-col>
          </ion-row>
          <!-- descrip -->
          <ion-row style=" height: 25px;">
            <ion-col size="3" class="ion-text-right">
                <p>Descripción : </p>
            </ion-col>
            <ion-col size="9" class="ion-text-nowrap">
              <p><b>{{ producto.descrip }}</b></p>            
            </ion-col>
          </ion-row>
          <!-- precio sin desc -->
          <ion-row *ngIf=" producto.descuentomax <= 0 " style=" height: 25px;">
              <ion-col size="3" class="ion-text-right">
                  <p>Precio : </p>
              </ion-col>
              <ion-col size="3" class="ion-text-right">
                  <b><p>${{ producto.precio | number:0 }}</p></b>
              </ion-col>
              <ion-col size="0.5" class="ion-text-center">
                  <p>x</p>
              </ion-col>
              <ion-col size="2" class="ion-text-center">
                  <b><p>{{ producto.cantidad }}</p></b>
              </ion-col>
              <ion-col size="0.5" class="ion-text-center">
                  <p>=</p>
              </ion-col>
              <ion-col size="3" class="ion-text-left">
                  <b><p>$ {{ producto.precio * producto.cantidad | number:0 }}</p></b>
              </ion-col>
          </ion-row>
          <!-- precio con desc -->
          <ion-row *ngIf=" producto.descuentomax > 0" style=" height: 25px;">
              <ion-col size="3" class="ion-text-right">
                  <p>Mayorista : </p>
              </ion-col>
              <ion-col size="3" class="ion-text-right">
                  <b><p>${{ producto.preciomayor | number:0 }}</p></b>
              </ion-col>
              <ion-col size="0.5" class="ion-text-center">
                  <p>x</p>
              </ion-col>
              <ion-col size="2" class="ion-text-center">
                  <b><p>{{ producto.cantidad }}</p></b>
              </ion-col>
              <ion-col size="0.5" class="ion-text-center">
                  <p>=</p>
              </ion-col>
              <ion-col size="3" class="ion-text-center">
                  <b><p>$ {{ producto.preciomayor * producto.cantidad | number:0 }}</p></b>
              </ion-col>
          </ion-row>    
        </ion-grid>            
      </ion-item>
    </ion-item-sliding>

    <!-- orden de compra -->
    <ion-card>
      <h5 style="margin-left: 10px;"><b>Orden de Compra Cliente</b></h5>
      <ion-item>
        <ion-label>Número de OCC: </ion-label>
        <ion-input type="text" name="textoOcc" [(ngModel)]="textoOcc" ></ion-input>        
      </ion-item>
    </ion-card>
    <!-- observaciones -->
    <ion-card>
      <h5 style="margin-left: 10px;"><b>Observaciones</b></h5>
      <ion-item>
        <ion-textarea type="text" name="textoObs" [(ngModel)]="textoObs" clearInput="true" rows="3"></ion-textarea >
      </ion-item>
    </ion-card>
    <!-- que se graba? -->
    <ion-card>
      <ion-grid fixed *ngIf=" sumaCarrito() > 0 ">
        <ion-list lines="none">
          <h5 style="margin-left: 10px;"><b>Opciones de grabación</b></h5>
          <ion-radio-group name="queHacerConCarrito" [(ngModel)]="queHacerConCarrito">
            <ion-item>
              <ion-label>Grabar una pre-venta</ion-label>
              <ion-radio value="Grabar una Pre-Venta" ></ion-radio>
            </ion-item>
            <ion-item>
              <ion-label>Grabar una cotización</ion-label>
              <ion-radio value="Grabar una cotización"  ></ion-radio>
            </ion-item>
            <ion-item>
              <ion-label>Grabar NVV definitiva</ion-label>
              <ion-radio value="Grabar NVV definitiva"></ion-radio>
            </ion-item>
            <ion-item>
                <ion-label>Solo enviar un correo</ion-label>
                <ion-radio value="Solo enviar un correo"></ion-radio>
            </ion-item>
            <!-- correo -->
            <ion-item *ngIf=" queHacerConCarrito === 'Solo enviar un correo' " style="margin-left: 15px;">
              <ion-label>Email : </ion-label>
              <ion-input type="text" name="cTo" [(ngModel)]="cTo" ></ion-input>        
            </ion-item>
            <ion-item *ngIf=" queHacerConCarrito === 'Solo enviar un correo' " style="margin-left: 15px;">
              <ion-label>Copia : </ion-label>
              <ion-input type="text" name="cCc" [(ngModel)]="cCc" ></ion-input>        
            </ion-item>
          </ion-radio-group>
          <ion-progress-bar *ngIf=" enviando " type="indeterminate"></ion-progress-bar>
          <ion-row>
            <ion-col size="12">
              <ion-button expand="block" size="small" (click)="accionDelCarrito()">
                <ion-icon slot="start" name="pulse"></ion-icon>
                {{ queHacerConCarrito }}
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-list>
      </ion-grid>
    </ion-card>

  </ion-list>
    
</ion-content>
