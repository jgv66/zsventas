<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button text=' '></ion-back-button>
        </ion-buttons>
        <img src="./assets/imgs/logo-zs.png" alt="" class="navbar-img">
        <ion-title>Notificación a Clientes</ion-title>
    </ion-toolbar>

    <ion-toolbar>
        <ion-segment (ionChange)="segmentChanged($event)" mode="ios">
            <ion-segment-button value="Ingreso" mode="ios">
                <ion-label>Ingreso</ion-label>
            </ion-segment-button>
            <ion-segment-button value="Pendientes" mode="ios">
                <ion-label>Pendientes</ion-label>
            </ion-segment-button>
            <ion-segment-button value="Informados" mode="ios">
                <ion-label>Informados</ion-label>
            </ion-segment-button>
        </ion-segment>
    </ion-toolbar>

</ion-header>

<ion-content>

    <div *ngIf=" segmento === 'Ingreso' " class="animated fadeIn">
        <ion-card>
            <ion-card-header mode='ios'>
                <ion-card-subtitle>Código : {{ sistema.codigo }}</ion-card-subtitle>
                <ion-card-subtitle>{{ sistema.descrip }} </ion-card-subtitle>
                <ion-card-title class="align-center">Datos necesarios</ion-card-title>
            </ion-card-header>
            <ion-card-content>
                <ion-list lines="none">
                    <ion-item>
                        <ion-label position="floating">Nombre del cliente (opcional)</ion-label>
                        <ion-input type="nombre" name="nombre" [(ngModel)]="nombre" placeholder="nombre del cliente"></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label position="floating">Email del cliente</ion-label>
                        <ion-input type="email" name="email" [(ngModel)]="email" placeholder="correo electrónico"></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label position="floating">Cantidad esperada del producto</ion-label>
                        <ion-input type="number" name="cantidad" [(ngModel)]="cantidad"></ion-input>
                    </ion-item>
                </ion-list>

                <ion-progress-bar *ngIf=" enviando " type="indeterminate"></ion-progress-bar>

                <ion-button size="small" expand="block" (click)="enviarNotificacion()" style="margin-top:25px;">
                    <ion-icon slot="start" name="notifications"></ion-icon>
                    Activar la notificación
                </ion-button>

            </ion-card-content>
        </ion-card>
        <ion-card>
            <ion-card-content>
                <p class="ion-text-justify" style="font-size:75%;">Esta opción permite activar una alarma en el servidor de Avisos, el cual indicará si el producto llega a tener stock suficiente para realizar la venta esperada.</p>
            </ion-card-content>
        </ion-card>
    </div>

    <div *ngIf=" segmento === 'Pendientes' " class="animated fadeIn">
        <ion-card>
            <ion-card-header mode='ios'>
                <ion-card-title class="align-center">Pendientes</ion-card-title>
            </ion-card-header>
        </ion-card>
        <ion-list class="ilistrounded">
            <ion-item *ngFor="let pendiente of pendientes">
                <ion-thumbnail slot="start">
                    <img src="//www.zsmotor.cl/img/Producto/{{ pendiente.codigoproducto }}/{{ pendiente.codigoproducto }}.jpg" onerror=" this.src='assets/imgs/no-img.png' " />
                </ion-thumbnail>
                <ion-label style="font-size: 80%;">
                    <ion-grid fixed>
                        <ion-row>
                            <ion-col size="7">
                                <h2>{{ pendiente.codigoproducto }}</h2>
                            </ion-col>
                            <ion-col size="5">
                                <ion-badge color="danger">Pedido : {{ pendiente.cantidad | number:"1.0-2" }}</ion-badge>
                            </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col size="12">
                                <p color="black" class="ion-text-wrap">{{ pendiente.descripcion }}</p>
                            </ion-col>
                        </ion-row>
                        <ion-row *ngIf=" pendiente.cliente !== '' ">
                            <ion-col size="12">
                                <h3>{{ pendiente.cliente }} - {{ pendiente.email }}</h3>
                            </ion-col>
                        </ion-row>
                        <ion-row *ngIf=" pendiente.cliente === '' ">
                            <ion-col size="12">
                                <h3>{{ pendiente.email }}</h3>
                            </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col size="12">Solicitud : {{ pendiente.fsolicitud }}</ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col size="12">
                                <ion-chip [color]=" pendiente.stbodega>0 ? 'primary' : 'danger'">
                                    <ion-icon name="pin"></ion-icon>
                                    <ion-label><b>{{ pendiente.stbodega | number:'1.0-0'  }}</b></ion-label>
                                </ion-chip>
                                <ion-chip [color]=" pendiente.stsucursal>0 ? 'primary' : 'danger'">
                                    <ion-icon name="home"></ion-icon>
                                    <ion-label><b>{{ pendiente.stsucursal | number:'1.0-0' }}</b></ion-label>
                                </ion-chip>
                                <ion-chip [color]=" pendiente.stempresa>0 ? 'primary' : 'danger'">
                                    <ion-icon name="globe"></ion-icon>
                                    <ion-label><b>{{ pendiente.stempresa | number:'1.0-0' }}</b></ion-label>
                                </ion-chip>
                            </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col size="12">
                                <ion-chip color="primary">
                                    <ion-icon name="boat"></ion-icon>
                                    <ion-label><b>{{ pendiente.importado | number:'1.0-0' }}</b></ion-label>
                                </ion-chip>
                            </ion-col>
                        </ion-row>
                    </ion-grid>
                </ion-label>
            </ion-item>
        </ion-list>
    </div>

    <div *ngIf=" segmento === 'Informados' " class="animated fadeIn">
        <ion-card>
            <ion-card-header mode='ios'>
                <ion-card-title class="align-center">Informados</ion-card-title>
            </ion-card-header>
        </ion-card>
        <ion-list class="ilistrounded">
            <ion-item *ngFor="let informado of informados">
                <ion-thumbnail slot="start">
                    <img src="//www.zsmotor.cl/img/Producto/{{ informado.codigoproducto }}/{{ informado.codigoproducto }}.jpg" onerror=" this.src='assets/imgs/no-img.png' " />
                </ion-thumbnail>
                <ion-label style="font-size: 80%;">
                    <ion-grid fixed>
                        <ion-row>
                            <ion-col size="7">
                                <h2>{{ informado.codigoproducto }}</h2>
                            </ion-col>
                            <ion-col size="5">
                                <ion-badge color="primary">Pedido : {{ informado.cantidad | number:"1.0-2" }}</ion-badge>
                            </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col size="12">
                                <p color="black" class="ion-text-wrap">{{ informado.descripcion }}</p>
                            </ion-col>
                        </ion-row>
                        <ion-row *ngIf=" informado.cliente !== '' ">
                            <ion-col size="12">
                                <h3>{{ informado.cliente }} - {{ informado.email }}</h3>
                            </ion-col>
                        </ion-row>
                        <ion-row *ngIf=" informado.cliente === '' ">
                            <ion-col size="12">
                                <h3>{{ informado.email }}</h3>
                            </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col size="12">Solicitud : {{ informado.fsolicitud }}</ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col size="12">Informado : {{ informado.fcierre }}</ion-col>
                        </ion-row>
                    </ion-grid>
                </ion-label>
            </ion-item>
        </ion-list>
    </div>

</ion-content>